---
layout: default
permalink: calendar.html
---

<script>
$(".navbar-custom").css('background-color', '#272940');
</script>
<style type='text/css'>
.event-location { font-weight: bold; font-style: italic; display: block }
a.fc-event:focus { color: white; }
.fc-event-container:not([rowspan]) { padding-bottom: 0.5em; }
</style>

<!-- Section: calendar -->

<section id="calen" class="home-section text-center">
    <div class="heading">
        <div class="heading-about">
            <div class="container">
                <div class="row">
                    <div class="col-lg-8 col-lg-offset-2">
                        <div class="wow bounceInDown" data-wow-delay="0.4s">
                            <div class="section-heading">
                                <h2>Events Calendar</h2>
                                <p> The ACSU holds a number of academic, corporate, and social events throughout the year. <br/>
                                Click the Join tab for more updates!
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div id = 'eventsCal'>UPDATED PLACEHOLDER</div>
        <div id='calendar' class = 'calendar'></div>
    </div>
</section>
<script src="./js/format-google-calendar.js"></script>
<script type='text/javascript'>
    $(document).ready(function() { $('#calendar').fullCalendar({ googleCalendarApiKey: 'AIzaSyBsosKuN91ELrOaJ2PpIxSmSYHcrYSllhE', events: { googleCalendarId: 'cornell.edu_ugjtscehl3thqdg9vh8eg89ulk@group.calendar.google.com' }, eventRender: function( evt, elem ) { if (evt.location) elem.find(".fc-title").append("<span class='event-location'>" + evt.location + "</span>"); } }); });
</script>
<script src='calendar.js'></script>

<script>
// documentation link : https://developers.google.com/calendar/v3/reference/events/list?apix_params=%7B%22calendarId%22%3A%22cornell.edu_uvd5bb84i557fp4mfqa1gs6ta4%40group.calendar.google.com%22%7D#try-it
    
var clientId = '283607811610-ut28mvjiu8cttad2k2hrak214vbg23eq.apps.googleusercontent.com'; 
var apiKey = 'AIzaSyDTDka1KSTFXGPykFu5mAsfBhxUPTI80lc'; 
var userEmail = "cornell.edu_uvd5bb84i557fp4mfqa1gs6ta4@group.calendar.google.com"; 
var userTimeZone = "Los_Angeles"; 
var maxRows = 10; 
var scopes = 'https://www.googleapis.com/auth/calendar';
    
function padNum(num) {
    if (num <= 9) { return "0" + num;}
    return num;
}

function AmPm(num) {
    if (num <= 12) { return "am " + num; }
    return "pm " + padNum(num - 12);
}

function monthString(num) {
    if (num === "01") { return "JAN"; } 
    else if (num === "02") { return "FEB"; } 
    else if (num === "03") { return "MAR"; } 
    else if (num === "04") { return "APR"; } 
    else if (num === "05") { return "MAJ"; } 
    else if (num === "06") { return "JUN"; } 
    else if (num === "07") { return "JUL"; } 
    else if (num === "08") { return "AUG"; } 
    else if (num === "09") { return "SEP"; } 
    else if (num === "10") { return "OCT"; } 
    else if (num === "11") { return "NOV"; } 
    else if (num === "12") { return "DEC"; }
}

function dayString(num){
    if (num == "1") { return "mon" }
    else if (num == "2") { return "tue" }
    else if (num == "3") { return "wed" }
    else if (num == "4") { return "thu" }
    else if (num == "5") { return "fri" }
    else if (num == "6") { return "sat" }
    else if (num == "0") { return "sun" }
}

function handleClientLoad() {
    gapi.client.setApiKey(apiKey);
    checkAuth();
}

function checkAuth() {
    gapi.auth.authorize({client_id: clientId, scope: scopes, immediate: true}, handleAuthResult);
}

function handleAuthResult(authResult) {
    if (authResult) { makeApiCall(); }
}

function makeApiCall() {
    var today = new Date(); 
    gapi.client.load('calendar', 'v3', function () {
        var request = gapi.client.calendar.events.list({
            'calendarId' : userEmail,
            'timeZone' : userTimeZone, 
            'singleEvents': true, 
            'timeMin': today.toISOString(), 
            'maxResults': maxRows, 
            'orderBy': 'startTime'});
    request.execute(function (resp) {
            for (var i = 0; i < resp.items.length; i++) {
                var li = document.createElement('li');
                var item = resp.items[i];
                var classes = [];
                var allDay = item.start.date? true : false;
                var startDT = allDay ? item.start.date : item.start.dateTime;
                var dateTime = startDT.split("T"); //split date from time
                var date = dateTime[0].split("-"); //split yyyy mm dd
                var startYear = date[0];
                var startMonth = monthString(date[1]);
                var startDay = date[2];
                var startDateISO = new Date(startMonth + " " + startDay + ", " + startYear + " 00:00:00");
                var startDayWeek = dayString(startDateISO.getDay());
                if( allDay == true){ 
                    var str = [
                    '<font size="4" face="courier">',
                    startDayWeek, ' ',
                    startMonth, ' ',
                    startDay, ' ',
                    startYear, '</font><font size="5" face="courier"> @ ', item.summary , '</font><br><br>'
                    ];
                }
                else{
                    var time = dateTime[1].split(":"); //split hh ss etc...
                    var startHour = AmPm(time[0]);
                    var startMin = time[1];
                    var str = [ 
                        '<font size="4" face="courier">',
                        startDayWeek, ' ',
                        startMonth, ' ',
                        startDay, ' ',
                        startYear, ' - ',
                        startHour, ':', startMin, '</font><font size="5" face="courier"> @ ', item.summary , '</font><br><br>'
                        ];
                }
                li.innerHTML = str.join('');
                li.setAttribute('class', classes.join(' '));
                document.getElementById('events').appendChild(li);
            }
        document.getElementById('eventsCal').innerHTML = "updated " + today;
        });
    });
}
</script>
<script src='https://apis.google.com/js/client.js?onload=handleClientLoad'></script>

